# Bark API Server üîä

![Bark Logo](https://user-images.githubusercontent.com/5068315/230698495-cbb1ced9-c911-4c9a-941d-a1a4a1286ac6.png)

–ü—Ä–æ—Å—Ç–æ–π, –Ω–æ –º–æ—â–Ω—ã–π API-—Å–µ—Ä–≤–µ—Ä –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–π —Ä–µ—á–∏ –∏–∑ —Ç–µ–∫—Å—Ç–∞ —Å –ø–æ–º–æ—â—å—é –º–æ–¥–µ–ª–∏ **Suno's Bark**. –ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–ø–∞–∫–æ–≤–∞–Ω –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –µ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ –ª–µ–≥–∫–∏–º –Ω–∞ –ª—é–±–æ–π –º–∞—à–∏–Ω–µ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Docker.

–≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–æ–ª–≥–æ–≥–æ –ø—É—Ç–∏ –ø—Ä–æ–± –∏ –æ—à–∏–±–æ–∫, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç —Å–ª–æ–∂–Ω—É—é –º–æ–¥–µ–ª—å –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –≤ –ø—Ä–æ—Å—Ç–æ–π –∏ –¥–æ—Å—Ç—É–ø–Ω—ã–π –≤–µ–±-—Å–µ—Ä–≤–∏—Å. –í–∞—à–∞ –∑–∞–¥–∞—á–∞ ‚Äî –ø—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç, –∞ –º–∞–≥–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≥–æ–ª–æ—Å–∞ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ!

---

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

*   **–í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ —Ä–µ—á–∏**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–µ—Ä–µ–¥–æ–≤–∞—è –º–æ–¥–µ–ª—å [suno/bark](https://huggingface.co/suno/bark) –æ—Ç Hugging Face –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –∏ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π —Ä–µ—á–∏.
*   **–ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –≥–æ–ª–æ—Å–æ–º**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–±–∏—Ä–∞—Ç—å –º—É–∂—Å–∫–∏–µ/–∂–µ–Ω—Å–∫–∏–µ –≥–æ–ª–æ—Å–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–æ–≤, –≤–∫–ª—é—á–∞—è —Ä—É—Å—Å–∫–∏–π, —Å –ø–æ–º–æ—â—å—é –≥–æ–ª–æ—Å–æ–≤—ã—Ö –ø—Ä–µ—Å–µ—Ç–æ–≤.
*   **–¢–æ–Ω–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞**: –£–ø—Ä–∞–≤–ª—è–π—Ç–µ "–∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å—é" –∏ —á–∏—Å—Ç–æ—Ç–æ–π –∑–≤—É–∫–∞ —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `temperature` –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.
*   **–ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è**: –£–ø–∞–∫–æ–≤–∞–Ω–æ –≤ Docker. –ù–∏–∫–∞–∫–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Python –∏–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–∞ –≤–∞—à—É –º–∞—à–∏–Ω—É –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.
*   **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–∞–±–æ—Ç–µ**: –í–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –Ω–∞ FastAPI, –∫–æ—Ç–æ—Ä—ã–π —Å—Ä–∞–∑—É –≥–æ—Ç–æ–≤ –ø—Ä–∏–Ω–∏–º–∞—Ç—å HTTP-–∑–∞–ø—Ä–æ—Å—ã.

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–î–ª—è –∑–∞–ø—É—Å–∫–∞ —ç—Ç–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω [Docker Desktop](https://www.docker.com/products/docker-desktop/).

### 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone https://github.com/–í–ê–®_–õ–û–ì–ò–ù/–í–ê–®_–†–ï–ü–û–ó–ò–¢–û–†–ò–ô.git
cd –í–ê–®_–†–ï–ü–û–ó–ò–¢–û–†–ò–ô
```
### 2. –°–æ–±–µ—Ä–∏—Ç–µ Docker-–æ–±—Ä–∞–∑

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —Å–æ–∑–¥–∞—Å—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ä–µ–¥—É —Å–æ –≤—Å–µ–º–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏.
``` Bash
IGNORE_WHEN_COPYING_START
IGNORE_WHEN_COPYING_END
    
docker build -t bark-api .
```

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

–¢–µ–ø–µ—Ä—å –∑–∞–ø—É—Å—Ç–∏–º –Ω–∞—à API-—Å–µ—Ä–≤–µ—Ä.

–í–∞—Ä–∏–∞–Ω—Ç –ê: –ó–∞–ø—É—Å–∫ –Ω–∞ CPU (–ú–µ–¥–ª–µ–Ω–Ω–æ, –Ω–æ –ø—Ä–æ—Å—Ç–æ)

–≠—Ç–æ—Ç —Å–ø–æ—Å–æ–± –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –≤–∏–¥–µ–æ–∫–∞—Ä—Ç—ã, –Ω–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∞—É–¥–∏–æ –±—É–¥–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç.
code Bash
IGNORE_WHEN_COPYING_START
IGNORE_WHEN_COPYING_END

``` Bash
# –î–ª—è PowerShell (Windows)
docker run -d -p 8001:8000 -v ${pwd}/hf-cache:/root/.cache/huggingface bark-api

# –î–ª—è Bash (Linux/macOS)
docker run -d -p 8001:8000 -v $(pwd)/hf-cache:/root/.cache/huggingface bark-api
```

–ß—Ç–æ —Ç–∞–∫–æ–µ -v ...? –≠—Ç–æ—Ç —Ñ–ª–∞–≥ "–ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ—Ç" –ø–∞–ø–∫—É hf-cache —Å –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä. –ú–æ–¥–µ–ª—å –≤–µ—Å–æ–º 4.5 –ì–ë —Å–∫–∞—á–∞–µ—Ç—Å—è —Ç—É–¥–∞ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—É—Å–∫–∏ –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–º–∏.

–í–∞—Ä–∏–∞–Ω—Ç –ë: –ó–∞–ø—É—Å–∫ –Ω–∞ GPU (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è, –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ!)

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–∏–¥–µ–æ–∫–∞—Ä—Ç–∞ NVIDIA –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –¥—Ä–∞–π–≤–µ—Ä—ã, –¥–æ–±–∞–≤—å—Ç–µ —Ñ–ª–∞–≥ --gpus all. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–π–º–µ—Ç –≤—Å–µ–≥–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥.
code Bash
IGNORE_WHEN_COPYING_START
IGNORE_WHEN_COPYING_END
    
# –î–ª—è PowerShell (Windows)
docker run -d -p 8001:8000 --gpus all -v ${pwd}/hf-cache:/root/.cache/huggingface bark-api

üéß –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å API

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É http://localhost:8001. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –Ω–∞ –Ω–µ–≥–æ POST-–∑–∞–ø—Ä–æ—Å, —á—Ç–æ–±—ã —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∞—É–¥–∏–æ.
–ö–æ–Ω–µ—á–Ω–∞—è —Ç–æ—á–∫–∞ (Endpoint)
```
POST /generate-audio/
```

–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON)
```
code JSON
IGNORE_WHEN_COPYING_START
IGNORE_WHEN_COPYING_END

    
{
  "text": "–í–∞—à —Ç–µ–∫—Å—Ç –¥–ª—è –æ–∑–≤—É—á–∏–≤–∞–Ω–∏—è.",
  "voice_preset": "v2/ru_speaker_6",
  "fine_temperature": 0.5,
  "coarse_temperature": 0.7
}
```
  
text (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π): –¢–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –æ–∑–≤—É—á–∏—Ç—å.

voice_preset (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π): –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≥–æ–ª–æ—Å–∞. –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –º–æ–¥–µ–ª–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, v2/ru_speaker_1 (–∂–µ–Ω—Å–∫–∏–π) –∏–ª–∏ v2/ru_speaker_0 (–º—É–∂—Å–∫–æ–π).

fine_temperature (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0.5): –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç —á–∏—Å—Ç–æ—Ç—É –∑–≤—É–∫–∞. –ß–µ–º –Ω–∏–∂–µ, —Ç–µ–º —á–∏—â–µ, –Ω–æ –º–æ–Ω–æ—Ç–æ–Ω–Ω–µ–µ.

coarse_temperature (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0.7): –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∏ –∏–Ω—Ç–æ–Ω–∞—Ü–∏–∏. –ß–µ–º –≤—ã—à–µ, —Ç–µ–º –∂–∏–≤–µ–µ, –Ω–æ –≤—ã—à–µ —Ä–∏—Å–∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤.
```
–ü—Ä–∏–º–µ—Ä —Å –ø–æ–º–æ—â—å—é curl
code Bash
IGNORE_WHEN_COPYING_START
IGNORE_WHEN_COPYING_END
    
curl -X POST "http://localhost:8001/generate-audio/" \
-H "Content-Type: application/json" \
-d "{\"text\": \"–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä! –Ø –≥–æ–≤–æ—Ä—é –≥–æ–ª–æ—Å–æ–º, —Å–æ–∑–¥–∞–Ω–Ω—ã–º –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–º –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–æ–º.\", \"voice_preset\": \"v2/ru_speaker_1\"}" \
--output speech.wav
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç –∑–∞–ø—Ä–æ—Å –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Ñ–∞–π–ª speech.wav.
üõ†Ô∏è –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥–µ

–ï—Å–ª–∏ –≤—ã –≤–Ω–µ—Å–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ main.py, –≤–∞–º –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:
```
code Bash
IGNORE_WHEN_COPYING_START
IGNORE_WHEN_COPYING_END
```
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker stop <–∏–º—è_–∏–ª–∏_id_–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞>
docker rm <–∏–º—è_–∏–ª–∏_id_–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞>

# 2. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑ —Å –Ω–æ–≤—ã–º –∫–æ–¥–æ–º
docker build -t bark-api .

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker run ... (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∞—à—É –∫–æ–º–∞–Ω–¥—É –∑–∞–ø—É—Å–∫–∞)

üí° –û—Ç –∞–≤—Ç–æ—Ä–∞

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç ‚Äî –Ω–µ –ø—Ä–æ—Å—Ç–æ –Ω–∞–±–æ—Ä —Å–∫—Ä–∏–ø—Ç–æ–≤. –≠—Ç–æ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –≤ –º–∏—Ä –≥–µ–Ω–µ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π, –ø–æ–ª–Ω–æ–µ –≤—ã–∑–æ–≤–æ–≤ –∏ –æ—Ç–∫—Ä—ã—Ç–∏–π. –û—Ç –ø–µ—Ä–≤–æ–π –æ—à–∏–±–∫–∏ Empty reply from server –¥–æ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ, —á–∏—Å—Ç–æ–≥–æ –∑–≤—É–∫–∞, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ API. –ü—É—Å—Ç—å —ç—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å—Ç–∞–Ω–µ—Ç –¥–ª—è –∫–æ–≥–æ-—Ç–æ –æ—Ç–ø—Ä–∞–≤–Ω–æ–π —Ç–æ—á–∫–æ–π, –∫–æ—Ç–æ—Ä–∞—è —Å—ç–∫–æ–Ω–æ–º–∏—Ç —á–∞—Å—ã –æ—Ç–ª–∞–¥–∫–∏ –∏ –ø–æ–∑–≤–æ–ª–∏—Ç —Å—Ä–∞–∑—É –ø–µ—Ä–µ–π—Ç–∏ –∫ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤—É. –í–µ–¥—å –∫–æ–≥–¥–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏, –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –Ω–∞—Å—Ç–æ—è—â–∞—è –º–∞–≥–∏—è. –£–¥–∞—á–∏!

  
